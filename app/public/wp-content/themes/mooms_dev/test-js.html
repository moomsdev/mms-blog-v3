<!DOCTYPE html>
<html>
	<head>
		<title>MoomsDev JS Test</title>
		<style>
			.test-result {
				padding: 10px;
				margin: 5px;
				border-radius: 5px;
			}
			.success {
				background: #d4edda;
				color: #155724;
			}
			.error {
				background: #f8d7da;
				color: #721c24;
			}
		</style>
	</head>
	<body>
		<h1>JavaScript Test Page</h1>

		<!-- Test Elements -->
		<div id="darkmode" class="btn">
			<label class="darkmode-icon">
				<input type="checkbox" />
				<div>Dark Mode Toggle</div>
			</label>
		</div>

		<button id="btn-hamburger">Menu Toggle</button>
		<nav class="nav-menu">Navigation Menu</nav>
		<header id="header">Header</header>

		<div id="test-results"></div>

		<script>
			function addResult(test, success, message) {
				const div = document.createElement("div");
				div.className =
					"test-result " + (success ? "success" : "error");
				div.innerHTML = "<strong>" + test + ":</strong> " + message;
				document.getElementById("test-results").appendChild(div);
			}

			window.addEventListener("load", function () {
				// Test 1: Check if MoomsCritical loaded
				addResult(
					"MoomsCritical",
					!!window.MoomsCritical,
					window.MoomsCritical
						? "Loaded v" + window.MoomsCritical.version
						: "Not found"
				);

				// Test 2: Check if MoomsMain loaded
				addResult(
					"MoomsMain",
					!!window.MoomsMain,
					window.MoomsMain
						? "Loaded v" + window.MoomsMain.version
						: "Not found"
				);

				// Test 3: Check if MoomsVendor loaded
				addResult(
					"MoomsVendor",
					!!window.MoomsVendor,
					window.MoomsVendor
						? "Loaded v" + window.MoomsVendor.version
						: "Not found"
				);

				// Test 4: Test dark mode toggle
				const darkModeInput = document.querySelector(
					".darkmode-icon input"
				);
				addResult(
					"Dark Mode Element",
					!!darkModeInput,
					darkModeInput ? "Found in DOM" : "Element missing"
				);

				// Test 5: Test menu button
				const menuBtn = document.getElementById("btn-hamburger");
				addResult(
					"Menu Button",
					!!menuBtn,
					menuBtn ? "Found in DOM" : "Element missing"
				);
			});
		</script>

		<!-- Load actual scripts with proper timing and error handling -->
		<script
			src="./dist/js/critical.min.js"
			onload="console.log('✅ Critical loaded')"
			onerror="console.error('❌ Critical failed')"
		></script>
		<script
			src="./dist/js/vendor.min.js"
			onload="console.log('✅ Vendor loaded')"
			onerror="console.error('❌ Vendor failed')"
		></script>
		<script
			defer
			src="./dist/js/main.min.js"
			onload="console.log('✅ Main loaded')"
			onerror="console.error('❌ Main failed')"
		></script>
	</body>
</html>
